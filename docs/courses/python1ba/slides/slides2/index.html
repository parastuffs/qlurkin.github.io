<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cours 2 - Séquences et interfaces graphiques</title>
    <script src="https://quentin.lurkin.xyz/deck.js" defer></script>
  </head>
  <body>
    <section>
      <h1>
        IC1T - Programmation <small> Séquences et interfaces graphiques </small>
      </h1>
      <p>Quentin Lurkin</p>
    </section>

    <section>
      <h2><code>if</code>, <code>else</code>, <code>elif</code></h2>
      <ul>
        <li>Il est possible de raccourcir des <code>if</code> imbriqués</li>
      </ul>
      <div class="row">
        <div class="span6">
          <pre><code class="lang-python">
          if D &lt; 0:
            print("Pas de solution réelle")
          else:
            if D == 0:
              print(-b/(2*a))
            else:
              print((-b-sqrt(D))/(2*a))
              print((-b+sqrt(D))/(2*a))
        </code></pre>
        </div>
        <div class="span6">
          <pre><code class="lang-python">
            if D &lt; 0:
              print("Pas de solution réelle")
            elif D == 0:
              print(-b/(2*a))
            else:
              print((-b-sqrt(D))/(2*a))
              print((-b+sqrt(D))/(2*a))
          </code></pre>
        </div>
      </div>
    </section>

    <section>
      <h2><code>while</code></h2>

      <ul>
        <li>
          Le <code>while</code> execute son bloc <strong>tant que</strong> sa
          condition est vraie
        </li>
      </ul>

      <div class="row">
        <div class="span6">
          <pre><code class="lang-python">
          i = 0
          while i < 5:
              i = i + 1
              print(i)
        </code></pre>
        </div>
        <div class="span6">
          <figure id="while">
            <div></div>
            <figcaption>Le <code>while</code></figcaption>
          </figure>
          <script type="module" defer>
            const draw = await Deck.Draw('#while > div', 350, 350)
            const start = draw.start().move(1, 2)
            const init = draw
              .round('Met la valeur <code>0</code> dans <code>i</code>')
              .belowOf(start)
            const back = draw.dummy().belowOf(init)
            const cond = draw.round('i < 5 ?').belowOf(back)
            const if1 = draw.diamond().belowOf(cond)
            const oui = draw.node('oui').belowOf(if1)
            const non = draw.node('non').rightOf(if1)
            const dummy = draw.dummy().leftOf(if1)
            const inc = draw.round('Incrémente <code>i</code>').belowOf(oui)
            const show = draw
              .round('Affiche la valeur de <code>i</code>')
              .belowOf(inc)
            const end = draw.end().belowOf(show)
            draw.polyline([
              start,
              '-->',
              init,
              '--',
              back,
              '-->',
              cond,
              '-->',
              if1,
              '--',
              oui,
              '-->',
              inc,
              '-->',
              show,
              '-|',
              dummy,
              '|->',
              back,
            ])
            draw.polyline([if1, '--', non, '|->', end])
            draw.done()
          </script>
        </div>
      </div>
    </section>

    <section>
      <h2>Les séquences</h2>
      <ul>
        <li>
          Les séquences sont des <strong>types</strong> de valeur :
          <ul>
            <li>
              Les chaînes de caractères (<code>string</code>)
              <pre><code class="lang-python">
                            a = "hello"      # littéral
                            b = 2 * a + "!!" # expression
                        </code></pre>
            </li>
            <li>
              Les listes (<code>list</code>)
              <pre><code class="lang-python">
                            a = [1, 2, 3, 4]    # littéral
                            a = [1, 2] + [3, 4] # expression
                        </code></pre>
            </li>
          </ul>
        </li>
      </ul>
    </section>

    <section>
      <h2>Les séquences</h2>
      <ul>
        <li>
          Les chaînes de caractères et les listes sont des séquences
          <small>représente une suite ordonnée de valeurs</small>
        </li>
        <li>
          Une séquence stocke <strong>zéro</strong>, <strong>une</strong> ou
          <strong>plusieurs</strong> valeurs
        </li>
        <li>
          Les valeurs d’une séquence possèdent un numéro d’<strong
            >ordre</strong
          >
          dans la séquence
          <small>l’indice de l’élément</small>
        </li>
      </ul>
      <pre><code class="lang-python">
            l = [2, 42, 3.1416, 34] # Liste est une séquence de valeurs
            s = "Le Python, c'est bon !"  # String est une séquence de caractères
        </code></pre>
    </section>

    <section>
      <h2>Opérations sur les séquences</h2>
      <ul>
        <li>
          L'opérateur + entre deux séquences permet de créer une
          <strong>nouvelle séquence</strong> contenant les deux opérandes
          bout-à-bout
          <small>On appelle cette opération la concaténation</small>
        </li>
        <li>
          L'opérateur * entre un entier n et une séquence permet de créer une
          <strong>nouvelle séquence</strong> contenant n fois la séquence de
          départ.
        </li>
      </ul>
      <pre><code class="lang-python">
            f = [1, 2] + [3, 4]  # [1, 2, 3, 4]
            g = 3 * "hello"      # "hellohellohello"
        </code></pre>
    </section>

    <section>
      <h2>Test d’appartenance</h2>
      <ul>
        <li>
          L'opérateur <code>in</code> permet de vérifier si une valeur se trouve
          dans une séquence.
          <small>Ou si une sous-chaine est dans une chaine de caractères</small>
        </li>
      </ul>
      <pre><code class="lang-python">
            L = [1, 2, 42, 3]
            if 42 in L:
                print("OK")
            
            S = 'Python'
            if 'hon' not in S:
                print("KO")
        </code></pre>
    </section>

    <section>
      <h2>Accès aux éléments</h2>
      <ul>
        <li>
          Il est possible d’accéder aux éléments individuels
          <small>Pour cela, on utilise les crochets []</small>
        </li>
        <li>
          Chaque éléments est repéré par son numéro d’ordre
          <small>Le numéro d’ordre est appelé <strong>indice</strong></small>
        </li>
        <li>
          Les indices commencent à <strong>zéro</strong>
          <small
            >Les indices négatifs permettent d’indiquer un élément en partant de
            la fin de la séquence</small
          >
        </li>
      </ul>
    </section>

    <section>
      <h2>Le <em>slicing</em></h2>
      <ul>
        <li>
          Il est possible de référencer une sous-séquence c-à-d une "tranche" de
          la séquence. On sépare les deux indices délimitant la tranche par un
          ":"
        </li>
        <li>
          La tranche [m:n] référence la sous-séquence qui va du m<sup>e</sup>
          élément (compris) au n<sup>e</sup> élément (non-compris).
        </li>
        <li>
          Si on omet le premier indice, la tranche démarre au début de la
          séquence
          <small>Idem avec le deuxième indice et la fin de la séquence</small>
        </li>
      </ul>
      <pre><code class="lang-python">
            s = "Le Python, c'est bon !"
            print(s[3:9]) # affiche 'Python'
            print(s[17:-2]) # affiche 'bon'
            print(s[17:]) # affiche 'bon !'
            print(s[:9]) # affiche 'Le Python'
        </code></pre>
    </section>

    <section>
      <h2>La longueur d’une séquence</h2>
      <ul>
        <li>
          Il est possible de connaitre le nombre d’éléments contenus dans une
          séquence grâce à la fonction <code>len()</code>
        </li>
      </ul>
      <pre><code class="lang-python">
            s = "Le Python, c'est bon !"
            print(len(s)) # affiche 22
        </code></pre>
    </section>

    <section>
      <h2>Un <code>string</code> est immuable</h2>
      <ul>
        <li>On peut modifier un élément d’une liste</li>
      </ul>
      <pre><code class="lang-python">
            s = [1, 2, 42, 4, 5]
            s[2] = 3
            print(s)   # affiche [1, 2, 3, 4, 5]
        </code></pre>
      <ul>
        <li>Une fois créé, un string ne peut plus être modifié</li>
        <li>
          On peut toujours créer un nouveau string avec une valeur adaptée
        </li>
      </ul>
      <pre><code class="lang-python">
        s = "Le Python, c'est bon !"
        s[17] = "c"                  # provoque une erreur !
        s = s[:17] + "cool" + s[20:] # crée un nouveau string adapté
      </code></pre>
    </section>

    <section>
      <h2>Liste</h2>
      <ul>
        <li>
          Une liste est une séquence permettant de stocker tous types de valeurs
        </li>
      </ul>
      <pre><code class="lang-python">
            numbers = [1, 2, 3, 4, 5]
            words = ["I", "love", "Python"]
            mixed = [1, "duck-billed platypus", True]
        </code></pre>
      <ul>
        <li>On peut supprimer un élément d’une liste.</li>
      </ul>
      <pre><code class="lang-python">
            numbers = [1, 2, 2, 3, 4, 5]
            del(numbers[1])
            print(numbers) # affiche [1, 2, 3, 4, 5]
        </code></pre>
    </section>

    <section>
      <h2>Editer avec des slicing</h2>
      <ul>
        <li>Les slicing permettent de remplacer une tranche d’un coup.</li>
      </ul>
      <pre><code class="lang-python">
            numbers = [1, 2, 3, 4, 5]
            numbers[0:0] = [0]      # ???
            numbers[6:6] = [6]      # ???
            numbers[3:4] = [42]     # ???
            numbers[3:7] = [3, 4]   # ???
            numbers[3:] = []        # ???
            del(numbers[1:])        # ???
        </code></pre>
    </section>

    <section>
      <h2>Ajout en fin de liste</h2>
      <ul>
        <li>Les slicing permettent l’ajout en fin de liste.</li>
      </ul>
      <pre><code class="lang-python">
            L[len(L):len(L)] = "nouveau élément"
        </code></pre>
      <ul>
        <li>Il existe une méthode plus simple</li>
      </ul>
      <pre><code class="lang-python">
            L.append("nouveau élément")
        </code></pre>
    </section>

    <section>
      <h2>Attention aux copies</h2>
      <ul>
        <li>
          La copie d’une liste n’est pas aussi simple qu’il n’y parait.
          <pre><code class="lang-python">
                    words = ['I', 'like', 'Python']
                    mots = words
                    mots[1] = 'love'
                    print(words)      # ???
                </code></pre>
        </li>
        <li>
          Un slicing permet cependant de créer une vraie copie dans les cas
          simples.
          <pre><code class="lang-python">
                    words = ['I', 'like', 'Python']
                    mots = words[:]     # ou mots = list(words)
                    mots[1] = 'love'
                    print(words)        # ???
                </code></pre>
        </li>
      </ul>
    </section>

    <section>
      <h2>Tuple</h2>
      <ul>
        <li>
          Séquence <strong>non modifiable</strong> d'éléments

          <small
            >Les éléments d'un tuple ne peuvent pas être réassignés et on ne
            peut pas en ajouter ou en enlever</small
          >
        </li>
        <li>
          <strong>Définition</strong> d'un tuple avec <code>()</code>

          <small>Parenthèses pas obligatoires lorsqu'au moins un élément</small>
        </li>
      </ul>
      <pre><code class="lang-python">
		    # Tuple vide
		    a = ()
		    
		    # Tuples contenant un seul élément
		    b = 1,
		    c = (1,)
		    
		    # Tuples contenant trois éléments
		    d = 1, 2, 3
		    e = (1, 2, 3)
	    </code></pre>
      <ul>
        <li>
          <strong>Utilisation</strong> d'un tuple similaire à celle des listes
        </li>
      </ul>
    </section>

    <section>
      <h2>Emballage et déballage</h2>

      <ul>
        <li>
          On peut <strong>emballer</strong> plusieurs valeurs dans un tuple
          <small
            >Elles sont toutes accessibles à partir d'une seule variable</small
          >
        </li>
        <li>
          On peut <strong>déballer</strong> un tuple dans plusieurs variables
          <small>Chaque variable reçoit la valeur d'un élément du tuple</small>
        </li>
      </ul>

      <pre><code class="lang-python">
		    t = 1, 2, 3
		    print(t)
		    
		    a, b, c = t
		    print(a, b, c, sep='/')
	    </code></pre>

      <pre><code class="lang-plaintext">
		    (1, 2, 3)
		    1/2/3
	    </code></pre>
    </section>

    <!-- <section> -->
    <!-- 	<h2>Plusieurs valeurs de retour</h2> -->
    <!---->
    <!-- 	<ul> -->
    <!-- 		<li> -->
    <!-- 			Une fonction peut <strong>renvoyer plusieurs valeurs</strong> -->
    <!-- 			<small>Il suffit en fait de renvoyer un tuple</small> -->
    <!-- 		</li> -->
    <!-- 		<li> -->
    <!-- 			Fonction qui <strong>trie</strong> deux valeurs <small>Renvoie les deux valeurs dans l'ordre</small> -->
    <!-- 		</li> -->
    <!-- 	</ul> -->
    <!---->
    <!-- 	<pre><code class="lang-python"> -->
    <!--     def sort(a, b): -->
    <!--       if a &lt; b: -->
    <!--         return a, b -->
    <!--       return b, a -->
    <!---->
    <!--     a = 42 -->
    <!--     b = 24 -->
    <!---->
    <!--     a, b = sort(a, b) -->
    <!--     print('a =', a, 'b =', b) -->
    <!--    </code></pre> -->
    <!-- </section> -->

    <section>
      <h2>Boucler dans une séquence</h2>
      <ul>
        <li>
          Pour parcourir les éléments d’une séquence, on peut utiliser une
          boucle while.
          <pre><code class="lang-python">
            numbers = [2, 5, 7, 2, 1]
            i = 0
            while i &lt; len(numbers):
                print(numbers[i])
          </code></pre>
        </li>
        <li>
          On peut aussi utiliser la boucle <code>for ... in</code> .
          <pre><code class="lang-python">
            numbers = [2, 5, 7, 2, 1]
            for n in numbers:
                print(n)
          </code></pre>
        </li>
        <li>Cela marche aussi avec les chaines de caractères.</li>
      </ul>
    </section>

    <!--<section class="code">
      <h2>Somme des éléments d’une liste</h2>
      <pre><code class="lang-python">
        def sum(L):
            s = 0
            for elem in L:
                s += elem
                return s

        print(sum([1, 2, 3, 42]))
        print(sum((4, 5, 6)))
        </code></pre>
    </section>

    <section class="code">
      <h2>Maximum d’une liste</h2>
      <pre><code class="lang-python">
        def max(L):
            m = L[0]
            for elem in L:
                if elem > m:
                    m = elem
            return m

        print(max([1, 2, 3, 42, 5]))
        print(max((5, 99, 7)))
      </code></pre>
    </section>

    <section class="code">
      <h2>Opération sur les éléments d’une liste</h2>
      <pre><code class="lang-python">
        # renvoie la lise des carrés de L
        def square(L):
            res = []
            for elem in L:
                res.append(elem**2)
            return res
        print(square([1, 2, 3, 42, 5]))
      </code></pre>
    </section>

    <section class="code">
      <h2>Filtrage d’une liste</h2>
      <pre><code class="lang-python">
        # renvoie la lise des éléments pairs de L
        def even(L):
            res = []
            for elem in L:
                if elem % 2 == 0:
                    res.append(elem)
            return res

        print(even([1, 2, 3, 42, 5]))
      </code></pre>
    </section>-->

    <section>
      <h2>Intervalles</h2>
      <ul>
        <li>Un intervalle est une séquence numérique logique.</li>
        <li>Créé avec la fonction <code>range()</code></li>
      </ul>
      <pre><code class="lang-python">
        range(5)         # [0, 1, 2, 3, 4]
        range(1, 5)      # [1, 2, 3, 4]
        range(1, 8, 2)   # [1, 3, 5, 7]
        range(5, 0, -1)  # ???
      </code></pre>
      <ul>
        <li>Souvent utilisé dans les boucles <code>for</code></li>
      </ul>
      <pre><code class="lang-python">
        for i in range(5):
          print(i)
      </code></pre>
    </section>

    <!--<section class="code">
      <h2>Recherche d’un élément</h2>
      <pre><code class="lang-python">
        def find(L, elem):
            for i in range(len(L)):
                if L[i] == elem:
                    return i
            return None

        print(find([1, 2, 3, 42, 5], 42))
      </code></pre>
    </section>-->

    <!-- <section class="deck-only"> -->
    <!--   <p class="center big"> -->
    <!--     N'oubliez pas de faire vos <a href="exercices3.zip">exercices</a> ! -->
    <!--   </p> -->
    <!--   <p class="center">A remettre sur claco</p> -->
    <!-- </section> -->
    <section>
      <h2>Programmation graphique</h2>
      <ul>
        <li>Ouvre une <strong>fenêtre</strong> de l'OS</li>
        <li>
          Tourne <strong>jusqu'à ce qu'on quitte</strong>
          <small>boucle !</small>
        </li>
        <li>
          Permet d'afficher des formes, images, animation
          <small>Une animation est une succession rapide d'images</small>
        </li>
      </ul>
    </section>

    <section>
      <h2>Pygame</h2>
      <ul>
        <li>Permet de créer un programme graphique</li>
        <li>
          Non-inclus dans l'installation de Python
          <small>Il faut installer le package</small>
        </li>
      </ul>
      <h3>Installation</h3>
      <ul>
        <li>
          Python peut
          <strong>télécharger et installer automatiquement des packages</strong>
        </li>
        <li>Pour installer Pygame :</li>
      </ul>
      <pre class="terminal">
			<b>> python -m pip install pygame</b>
		</pre>
    </section>

    <section class="code">
      <h2>Premier programme graphique</h2>
      <pre>
			<code class="lang-python">
				import pygame

				# initialisation de pygame
				pygame.init()

				# demande une fenêtre de 800x600 pixels
				screen = pygame.display.set_mode((800, 600))

				# la clock sert à limiter le nombre d'images par seconde
				clock = pygame.time.Clock()

				# boucle jusqu'à ce qu'on quitte
				while not pygame.event.peek(pygame.QUIT):

					# attends qu'il se soit passé au moins 1/60
					# de seconde depuis le dernier tick
					clock.tick(60)

					# dessine un cercle rouge centré en (100, 300) de rayon 20
					pygame.draw.circle(screen, (255, 0, 0), (100, 300), 20)

					# affiche l'image qui vient d'être dessinée
					pygame.display.flip()
			</code>
		</pre>
    </section>

    <section>
      <h2>Animation</h2>
      <p>
        Pour animer le cercle, il suffit de le dessiner à une position un peu
        différente à chaque image.
      </p>
      <pre><code class="lang-python">
			import pygame

			# initialisation de pygame
			pygame.init()

			# demande une fenêtre de 800x600 pixels
			screen = pygame.display.set_mode((800, 600))

			clock = pygame.time.Clock()

			xCircle = 100

			# boucle jusqu'à ce qu'on quitte
			while not pygame.event.peek(pygame.QUIT):
				clock.tick(60)

				# dessine un rectangle noir pour effacer l'image
				pygame.draw.rect(screen, (0, 0, 0), pygame.Rect(0, 0, 800, 600))

				# dessine un cercle rouge centré en (xCircle, 300) de rayon 20
				pygame.draw.circle(screen, (255, 0, 0), (xCircle, 300), 20)
				
				# déplace le cercle
				xCircle += 1

				# affiche l'image qui vient d'être dessinée
				pygame.display.flip()
		</code></pre>
    </section>

    <section>
      <h2>Événements</h2>
      <ul>
        <li>
          Gestion des événements lié à la souris et au clavier
          <small>Et autres événements comme <code>pygame.QUIT</code></small>
        </li>
        <li>Fonctions dans le module <code>pygame.event</code></li>
        <li>Les événements captés par Pygame sont stocké dans une file</li>
        <li>
          Le fonction <code>pygame.event.peek</code> vérifie si un certain type
          d'événement attends dans la file
          <pre><code class="lang-python">
					# boucle jusqu'à ce qu'on quitte
					while not pygame.event.peek(pygame.QUIT):
						# ...
				</code></pre>
        </li>
      </ul>
    </section>

    <section>
      <h2>Clavier</h2>
      <ul>
        <li>
          Pour traiter tous les événements
          <pre><code class="lang-python">
					# Boucler sur tous les events
					for event in pygame.event.get():
						# Faire quelque-chose avec l'event
				</code></pre>
        </li>
        <li>
          Tester le type de l'événement avec l'attribut <code>event.type</code>
          <small>
            Types des événements clavier: <code>pygame.KEYDOWN</code> et
            <code>pygame.KEYUP</code>
          </small>
        </li>
        <li>
          <code>event.key</code> contient un code correspondant à la touche
          concernée.
        </li>
        <li>
          <a href="https://www.pygame.org/docs/ref/key.html#key-constants-label"
            >Les constantes contenant les <code>key</code> code</a
          >
        </li>
      </ul>
    </section>

    <section class="code">
      <h2>Clavier</h2>
      <pre><code class="lang-python">
			import pygame
			import sys

			pygame.init()

			screen = pygame.display.set_mode((800, 600))

			clock = pygame.time.Clock()

			xCircle = 100
			vxCircle = 1

			# boucle infinie !
			while True:
				clock.tick(60)
				for event in pygame.event.get():
					# Quitter si l'event est un QUIT
					if event.type == pygame.QUIT:
						sys.exit()
					# Changer la vitesse de la balle si on appuie sur espace
					if event.type == pygame.KEYDOWN and event.key == pygame.K_SPACE:
						vxCircle = -vxCircle
					
				pygame.draw.rect(screen, (0, 0, 0), pygame.Rect(0, 0, 800, 600))

				pygame.draw.circle(screen, (255, 0, 0), (xCircle, 300), 20)
				
				# déplace le cercle
				xCircle += vxCircle

				pygame.display.flip()
		</code></pre>
    </section>

    <!-- <section> -->
    <!-- 	<h2>Touche de modification</h2> -->
    <!-- 	<ul> -->
    <!-- 		<li>Pour tester si une touche de modification sont appuyée : -->
    <!-- 		<pre><code class="lang-python"> -->
    <!-- 			if event.mod & pygame.KMOD_SHIFT: -->
    <!-- 				# SHIFT était appuyé lors de cet event -->
    <!-- 		</code></pre> -->
    <!-- 		</li> -->
    <!-- 		<li>Ou plusieurs : -->
    <!-- 			<pre><code class="lang-python"> -->
    <!-- 				if event.mod & (pygame.KMOD_SHIFT | pygame.KMOD_ALT): -->
    <!-- 					# SHIFT et ALT étaient appuyés lors de cet event -->
    <!-- 			</code></pre> -->
    <!-- 		</li> -->
    <!-- 	</ul> -->
    <!-- </section> -->

    <section>
      <h2>Souris</h2>
      <ul>
        <li>
          Types des événements souris: <code>pygame.MOUSEBUTTONDOWN</code>,
          <code>pygame.MOUSEBUTTONUP</code>, <code>pygame.MOUSEMOTION</code>
        </li>
        <li>
          Les attributs intéressants des événements
          <code>pygame.MOUSEMOTION</code> sont :
          <ul>
            <li><code>pos</code>: les coordonnées de la souris</li>
            <li><code>rel</code>: la vitesse de la souris</li>
          </ul>
        </li>

        <li>
          Les attributs intéressants des événements
          <code>pygame.MOUSEBUTTONDOWN</code> et
          <code>pygame.MOUSEBUTTONUP</code> sont :
          <ul>
            <li>
              <code>button</code>: 1, 2 ou 3 en fonction du bouton pressé
              (gauche, milieu ou droit)
            </li>
            <li><code>pos</code>: les coordonnées de la souris</li>
          </ul>
        </li>
      </ul>
    </section>

    <section class="code">
      <h2>Souris</h2>

      <pre><code class="lang-python">
			import pygame
			import sys

			pygame.init()

			screen = pygame.display.set_mode((800, 600))

			clock = pygame.time.Clock()

			posCircle = (100, 100)

			# boucle infinie !
			while True:
				clock.tick(60)
				for event in pygame.event.get():
					# Quitter si l'event est un QUIT
					if event.type == pygame.QUIT:
						sys.exit()
					# Changer la vitesse de la balle si on appuie sur espace

					if event.type == pygame.MOUSEMOTION:
						# Place le cercle là où se trouve la souris
						posCircle = event.pos
					
				pygame.draw.rect(screen, (0, 0, 0), pygame.Rect(0, 0, 800, 600))

				pygame.draw.circle(screen, (255, 0, 0), posCircle, 20)

				pygame.display.flip()
		</code></pre>
    </section>
    <section>
      <h2>Documentation</h2>
      <h3>Pygame</h3>
      <p><a href="https://www.pygame.org/docs/">www.pygame.org/docs/</a></p>
    </section>
  </body>
</html>
