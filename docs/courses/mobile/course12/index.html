<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course 1 & 2</title>
    <script src="https://quentin.lurkin.xyz/deck.js"></script>
</head>
<body>
    <section>
        <h1>AM4L - Mobile Development</h1>
    </section>
    <section>
        <h2>Informations Générales</h2>
        <ul>
            <li>AM4L <strong>Applications Mobiles</strong><small>5 cours de 1h30 (7,5 heures) et 12 labos de 3h30 (42 heures)</small></li>
            <li><strong>Evaluation</strong>
            <ul>
                <li>Examen Oral</li>
                <li>Projet : Défense individuelle à l'Oral</li>
            </ul>
            </li>
            <li><strong>Enseignant : Quentin Lurkin (lur@ecam.be)</strong></li>
        </ul>
    </section>
    <section>
        <h2>What’s a Mobile Application?</h2>
        <p>Work on Mobile Devices</p>
        <ul>
          <li>Limited Computing capabilities<small>RAM, CPU, Battery</small></li>
          <li>Limited input/output capabilities<small>Tactile, Screen size</small></li>
          <li>Always connected<small>Always on, Sensors</small></li>
        </ul>
    </section>
    <section>
        <h2>Multiple types of Mobile Apps</h2>
        <ul>
          <li>Native Application<small>Android, iOS</small></li>
          <li>Web Application<small>Responsive, Progressive</small></li>
          <li>Hybrid Application<small>Cross-plateform</small></li>
        </ul>
    </section>
    <section>
        <h2>Multiple types of Mobile Apps</h2>
        <p>Native App</p>
        <figure><img class="zoom" src="./native.svg"></figure>
    </section>
    <section>
        <h2>Multiple types of Mobile Apps</h2>
        <p>Web App</p>
        <figure><img class="zoom" src="./web.svg"></figure>
    </section>
    <section>
        <h2>Multiple types of Mobile Apps</h2>
        <p>Hybrid App</p>
        <figure><img class="zoom" src="./hybrid.svg"></figure>
    </section>
    <section>
        <h2>Android Software Stack</h2>
        <div class="row">
          <div class="span8">
            <ul>
              <li>Linux Kernel<small>deals with the hardware</small></li>
              <li>C/C++ Libraries<small>SQLite, ...</small></li>
              <li>Android Runtime<small>Each App run in his own Runtime instance</small></li>
              <li>Application framework<small>Classes and services your App can use</small></li>
              <li>Application Layer<small>All apps installed Text of the left part</small></li>
            </ul>
          </div>
          <div class="span4 middle">
            <figure><img src="./stack.svg"></figure>
          </div>
        </div>
    </section>
    <section>
        <h2>Building Android App</h2>
        <ul>
          <li>Gradle<small>Build System used by Android Studio</small></li>
          <li>Jar Signer Tool for digitaly sign Java ARchive (jar)</li>
          <li>ADB : Android Debug Bridge<small>Command line tool for interacting with devices</small></li>
        </ul>
        <figure><img class="max" src="./build.svg"></figure>
    </section>
    <section>
        <h2>Android App Components</h2>
        <ul>
          <li>Activity<small> A UI the user can interact with</small></li>
          <li>Service<small> Perform long-running operations in the background</small></li>
          <li>Content Provider<small> Encapsulate the data, and provide mechanisms for defining data security</small></li>
          <li>Broadcast Receiver<small> Can receive broadcast message from the system or other App even if our App is not running</small></li>
        </ul>
    </section>
    <section>
        <h2>Application Sandboxing</h2>
        <ul>
            <li>Android platform uses the Linux user-based permissions model to isolate application resources.</li>
            <li>Communication with the system or other app must go through system's APIs.</li>
            <li>Acces to sensible data is protected by permissions that require special consent from the user.</li>
        </ul>
        <figure><img src="./security.svg"></figure>
    </section>
    <section>
        <h1>Kotlin</h1>
    </section>
    <section>
        <h2>Kotlin</h2>
        <ul>
            <li>Object Oriented</li>
            <li>Functional Programming </li>
            <li>Compile in Bytecode for the JVM</li>
            <li>100% inter-operable with Java</li>
            <li>Officially supported by Android</li>
            <li>Less verbose than Java</li>
            <li>Protection againts NullPointerExcepetion</li>
        </ul>
    </section>
    <section>
        <h2>Hello World !!</h2>
        <pre><code class="language-kotlin">
            fun main() {
                println("Hello World !!")
            }
        </code></pre>
    </section>
    <section>
        <h2>Variables</h2>
        <ul>
            <li>Read-only local variables are defined using the keyword <code>val</code>
                <pre><code class="language-kotlin">
                    val e = 42
                    e = 43             // Compile Error "val" are final
                </code></pre>
            </li>
            <li>Variables that can be reassigned use the <code>var</code> keyword.
                <pre><code class="language-kotlin">
                    var a: Int = 5
                    var b = 5          // type can be omited if it can be infered
                    var c: Int = null  // Compile Error: type are non-nullable by default
                    var d: Int? = null // OK
                </code></pre>
            </li>
            <li>You can declare variables at the top level.
                <pre><code class="lang-kotlin">
                    var x = 0

                    fun incrementX() { 
                        x += 1 
                    }
                </code></pre>
            </li>
        </ul>
    </section>
    <section>
        <h2>Functions</h2>
        <ul>
            <li>A function with two Int parameters and Int return type.
                <pre><code class="language-kotlin">
                    fun sum(a: Int, b: Int): Int {
                        return a + b
                    }
        
                    // A function body can be an expression.
                    fun sum(a: Int, b: Int): Int = a + b
        
                    // Its return type can be infered.
                    fun sum(a: Int, b: Int) = a + b
                </code></pre>
            </li>
            <li>A function that returns no meaningful value, returns the Unit type.
                <pre><code class="language-kotlin">
                    fun printSum(a: Int, b: Int): Unit {
                        println("sum of $a and $b is ${a + b}")
                    }
            
                    // Unit return type can be omitted.
                    fun printSum(a: Int, b: Int) {
                        println("sum of $a and $b is ${a + b}")
                    }
                </code></pre>
            </li>
        </ul>
    </section>
    <section>
        <h2>String templates</h2>
        <pre><code class="lang-kotlin">
            // simple name in template:
            var a = 1
            val s1 = "a is $a" 

            // arbitrary expression in template:
            a = 2
            val s2 = "${s1.replace("is", "was")}, but now is $a"
        </code></pre>
    </section>
    <section>
        <h2>Conditional expressions</h2>
        <pre><code class="lang-kotlin">
            fun maxOf(a: Int, b: Int): Int {
                if (a > b) {
                    return a
                } else {
                    return b
                }
            }

            // if expression
            fun maxOf(a: Int, b: Int) = if (a > b) a else b
        </code></pre>
    </section>
    <section>
        <h2>for loop</h2>
        <pre><code class="lang-kotlin">
            val items = listOf("apple", "banana", "kiwifruit")
            for (item in items) {
                println(item)
            }

            // go through indices
            for (index in items.indices) {
                println("item at $index is ${items[index]}")
            }
        </code></pre>
    </section>
    <section>
        <h2>while loop</h2>
        <pre><code class="lang-kotlin">
            val items = listOf("apple", "banana", "kiwifruit")
            var index = 0
            while (index &lt; items.size) {
                println("item at $index is ${items[index]}")
                index++
            }
        </code></pre>
    </section>
    <section>
        <h2>when expression</h2>
        <pre><code class="lang-kotlin">
            fun describe(obj: Any): String =
                when (obj) {
                    1          -> "One"
                    "Hello"    -> "Greeting"
                    is Long    -> "Long"
                    !is String -> "Not a string"
                    else       -> "Unknown"
                }
        </code></pre>
    </section>
    <section>
        <h2>Ranges</h2>
        <ul>
            <li>Check if a number is within a range using in operator.
                <pre><code class="lang-kotlin">
                    val x = 10
                    val y = 9
                    if (x in 1..y+1) {
                        println("fits in range")
                    }
                </code></pre>
            </li>
            <li>Iterate over a range.
                <pre><code class="lang-kotlin">
                    for (x in 1..5) {
                        print(x)
                    }
                    println()
                    for (x in 1..10 step 2) {
                        print(x)
                    }
                    println()
                    for (x in 9 downTo 0 step 3) {
                        print(x)
                    }
                </code></pre>
            </li>
        </ul>
    </section>
    <section>
        <h2>Class</h2>
        <ul>
            <li>The class body is the primary constructor
                <pre><code class="language-kotlin">
                    class Person constructor(name: String) {
                        val name = name
                    }
                    
                    class Person(name: String) {    // Shorter
                        val name = name
                    }
                    
                    class Person(val name: String)  // Shorter
                    
                    class DontCreateMe private constructor () {}
                    
                    fun main(args: Array&lt;String>) {
                        val pers = Person("Quentin")
                        println(pers.name)
                    }
                </code></pre>
            </li>
        </ul>
    </section>
    <section>
        <h2>Class</h2>
        <ul>
            <li>Can have secondary constructor</li>
            <li>Must call the primary constructor
                <pre><code class="language-kotlin">
                    class Person constructor(name: String) {
                        val name = name
                        val friends = mutableListOf&lt;Person>()
                        constructor(name: String, friend: Person) : this(name) {
                            friends.add(friend)
                        }
                    }
                </code></pre>
            </li>
            <li>Init Blocks are executed as part of the primary constuctor
                <pre><code class="language-kotlin">
                    class Person constructor(name: String) {
                        val name = name
                    
                        init {
                            println("hello $name")
                        }
                    
                        val friends = mutableListOf&lt;Person>()
                    
                        constructor(name: String, friend: Person) : this(name) {
                            friends.add(friend)
                            println("Friend ${friend.name} Added")
                        }
                    
                        init {
                            println("You've got ${friends.size} friend(s)")
                        }
                    }
          
                    fun main(args: Array&lt;String>) {
                        val pers = Person("LUR", Person("HSL"))
                    }
                </code></pre>
                <div class="terminal">
                    hello HSL
                    you've got 0 friend(s)
                    hello LUR
                    you've got 0 friend(s)
                    Friend HSL Added
                </div>
            </li>
        </ul>
    </section>
    <section>
        <h2>Data Class</h2>
        <pre><code class="language-kotlin">
            data class Student(val name: String, val matricule: String)
        </code></pre>
        <ul>
            <li>Get an <code class="language-kotlin">equals()</code> and <code class="language-kotlin">hashCode()</code> method</li>
            <li>Get a <code class="language-kotlin">toString()</code> method</li>
            <li>Get a <code class="language-kotlin">copy(...)</code> method</li>
            <li>Get <code class="language-kotlin">componentN()</code> methods</li>
        </ul>
    </section>
    <section>
        <h2>Methods</h2>
        <ul>
            <li>Just declare a function inside the class body.
                <pre><code class="language-kotlin">
                    class Dog {
                        fun bark(): String {
                            return "Woof"
                        }
                    }
                    
                    fun main(args: Array&lt;String>) {
                        println(Dog().bark())  // display Woof
                    }
                </code></pre>
            </li>
    </section>
    <section>
        <h2>Operator / infix</h2>
        <pre><code class="language-kotlin">
            data class Vector2D(val x:Double, val y:Double) {
                infix fun dot(other: Vector2D): Double {
                    return this.x * other.x + this.y * other.y
                }
            
                operator fun plus(other: Vector2D): Vector2D {
                    return Vector2D(this.x + other.x, this.y + other.y)
                }
            }
  
            fun main(args: Array&lt;String>) {
                val v1 = Vector2D(1.0, 1.0)
                val v2 = Vector2D(-1.0, 1.0)
                
                println(v1 + v2)
                println(v1 dot v2)
            }
        </code></pre>
    </section>
    <section>
        <h2>Properties</h2>
        <ul>
            <li>Trivial properties are created by default
                <pre><code class="language-kotlin">
                    class Person(name: String) {    // Shorter
                        val name = name  // trivial read-only property
                                        // backing field is automatically created
                    
                        val friends = mutableListOf&lt;Person>()
                        val hasNoFriends: Boolean  //no backing field
                            get() = friends.size == 0
                    
                        var weight = 0 // the initializer value is written directly to the backing field
                            set(value) {
                                if (value >= 0) field = value
                            }
                    }
                </code></pre>
            </li>
        </ul>
    </section>
    <section>
        <h2>Inheritance</h2>
        <pre><code class="language-kotlin">
            open class Base(p: Int)
  
            class Derived(p: Int) : Base(p) // whith a primary constructor
            
            class Derived2 : Base {
                constructor(p: Int) : super(p) // whithout a primary constructor
            }
        </code></pre>
    </section>
    <section>
        <h2>Method Override</h2>
        <pre><code class="language-kotlin">
            open class Base {
                open fun v() {}
                fun nv() {}
            }
            
            class Derived() : Base() {
                override fun v() {}
            }
            
            open class AnotherDerived() : Base() {
                final override fun v() {}
            }
        </code></pre>
    </section>
    <section>
        <h2>More Functions</h2>
        <pre><code class="language-kotlin">
            fun sum0(a: Int, b: Int): Int {
                return a + b
            }
            
            fun sum1(a: Int, b: Int): Int = a + b
            
            fun sum2(a: Int, b: Int) = a + b
            
            val sum3 = fun(a: Int, b: Int): Int {
                return a + b
            }
            
            val sum4: (Int, Int) -> Int = fun(a: Int, b: Int): Int = a + b
  
            val sum5 = fun(a: Int, b: Int): Int = a + b
            
            val sum6 = fun(a: Int, b: Int) = a + b
            
            val sum7 = {a: Int, b: Int -> a + b}
            
            val sum8: (Int, Int) -> Int = { a, b -> a + b }
            
            val square: (Int) -> Int = {it * it}
            
            fun fact1(n: Int): Int = if (n > 0) n * fact1(n-1) else 1
            
            val fact2: (Int) -> (Int) = { (1..it).reduce({ fact, i -> fact * i }) }
        </code></pre>
    </section>
    <section>
        <h2>Higher Order Function</h2>
        <pre><code class="language-kotlin">
            val count = fun(): () -> Int {
                var count = 0
                return fun(): Int {
                    count++
                    return count
                }
            }()
            
            val count2 = {
                var count = 0
                {
                    count++
                    count
                }
            }()
  
            fun table(base: Int, first: Int = 1, last: Int = 10, symbol: String = "x", op: (Int, Int) -> Int = {a,b -> a*b}) {
                for (i in first..last) {
                    println("$i $symbol $base = ${op(i, base)}")
                }
            }
            
            fun main(args: Array&lt;String>) {
                table(7)
                table(5, 7, 12, "+", ::sum0)
            }
        </code></pre>
    </section>
    <section>
        <h2>Higher Order Function on collections</h2>
        <pre><code class="lang-kotlin">
            val fruits = listOf("banana", "avocado", "apple", "kiwifruit")
            fruits
                .filter { it.startsWith("a") }
                .sortedBy { it }
                .map { it.uppercase() }
                .forEach { println(it) }
        </code></pre>
    </section>
    <section>
        <h2>No NullPointerException</h2>
        <ul>
            <li>A reference must be explicitly marked as nullable when null value is possible. Nullable type names have ? at the end.
                <pre><code class="language-kotlin">
                    var lur: Person = Person("LUR")
                    println(lur.name) 
                    
                    var cbf: Person? = Person("CBF")
                    println(cbf.name)         // Error compilation
                    if(cbf != null) {
                        println(cbf.name)     // Ok
                    }
                    println(cbf?.name)        // Ok
                    println(cbf!!.name)       // Shoot yourself in the foot !
                </code></pre>
            </li>
        </ul>
    </section>
    <section>
        <p class="big center"><strong>Install <a href="https://developer.android.com/studio?hl=fr">Android Studio + SDK</a> for next Lab</strong></p>
    </section>
</body>
</html>