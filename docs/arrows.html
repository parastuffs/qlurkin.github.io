<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/document.js" defer></script>
    <link rel="stylesheet" href="/grid.css">
</head>
<body>
    <h1>Test flow</h1>
    <p>Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum <span id="truc">caca</span> Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum </p>
    
    <figure>
        <div id='diagram'></div>
        <figcaption>Second degré</figcaption>
    </figure>
    <script type="module" defer>
        import {Context, noArrow, arrow, inheritance, composition} from './draw.js'
        await Doc.ready
        const context = Context('#diagram', 600, 600)

        const start = context.startNode()
        const delta = context.round('calculer <code>b*b-4*a*c</code> et appeler le résultat D').belowOf(start)
        const test_delta = context.round('Est-ce que D est négatif ?').belowOf(delta)
        const if1 = context.diamond().belowOf(test_delta)
        const non1 = context.node('non').belowOf(if1)
        const test_null = context.round('Est-ce que D est nul ?').belowOf(non1)
        const if2 = context.diamond().belowOf(test_null)
        const non2 = context.node('non').belowOf(if2)
        const root1 = context.round('La 1<sup>re</sup> racine est <code>(-b+sqrt(D))/(2*a)</code>').belowOf(non2)
        const root2 = context.round('La 2<sup>e</sup> racine est <code>(-b-sqrt(D))/(2*a)</code>').belowOf(root1)
        const dummy = context.dummy().belowOf(root2)
        const end = context.endNode().belowOf(dummy)

        const oui1 = context.node('oui').rightOf(if1)
        const dummy2 = context.dummy().rightOf(oui1, 2)
        const noroot = context.round('Pas de racine réelle').rightOf(test_null, 3)
        const dummy3 = context.dummy().rightOf(dummy, 3)

        const oui2 = context.node('oui').rightOf(if2)
        const dummy4 = context.dummy().rightOf(oui2)
        const droot = context.round('La racine double est <code>-b/(2*a)</code>').rightOf(root1, 2)
        const dummy5 = context.dummy().rightOf(dummy, 2)

        context.start(start).end(delta, arrow).line()
        context.start(delta).end(test_delta).line()
        context.start(test_delta).end(if1, arrow).line()
        context.start(if1).end(non1).line()
        context.start(non1).end(test_null).line()
        context.start(test_null).end(if2, arrow).line()
        context.start(if2).end(non2).line()
        context.start(non2).end(root1).line()
        context.start(root1).end(root2).line()
        context.start(root2).end(dummy).line()
        context.start(dummy).end(end, arrow).line()
        context.start(if2).end(oui2).line()
        context.start(oui2).end(dummy4).line()
        context.start(dummy4).end(droot, arrow).line()
        context.start(droot).end(dummy5).line()
        context.start(dummy5).end(dummy, arrow).line()
        context.start(if1).end(oui1).line()
        context.start(oui1).end(dummy2).line()
        context.start(dummy2).end(noroot, arrow).line()
        context.start(noroot).end(dummy3).line()
        context.start(dummy3).end(dummy, arrow).line()
    </script>
</body>
</html>